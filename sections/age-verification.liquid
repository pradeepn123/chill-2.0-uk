<div class="age_verification" id="age_verification_popup">
  <div class="section_content">
    {% if  section.settings.video != blank  and  section.settings.verification_block_header != blank  %}
      <div class="video_container">
          {% if section.settings.preloader_desktop != blank %}
            <img src="{{ section.settings.preloader_desktop }}" alt="preloader" id="age_verification_preloader_desktop"/>
          {% endif %}
          {% if section.settings.preloader_tablet != blank %}
            <img src="{{ section.settings.preloader_tablet }}" alt="preloader" id="age_verification_preloader_tab"/>
          {% endif %}
          {% if section.settings.preloader_mobile != blank %}
            <img src="{{ section.settings.preloader_mobile }}" alt="preloader" id="age_verification_preloader_mobile"/>
          {% endif %}
          <video autoplay muted playsinline loop id="myVideo">
              <source src="{{ section.settings.video | escape }}" type="video/mp4">
          </video>
          <div class="page_content">
                <img src="https://cdn.shopify.com/s/files/1/0536/9115/4590/files/living_chill.svg?v=1664361157" alt="."  class="outer_ring_svg"  width="100" height="100" loading="lazy">
                <div class="verification_block">
                  <div class="verification_block_content">
                    <div class="block_icon">
                      <svg xmlns="http://www.w3.org/2000/svg" width="232.676" height="49.349" viewBox="0 0 232.676 49.349" style="&#10;    fill: #fff;&#10;">
                        <g id="Layer_1" transform="translate(-56.3 -144.7)">
                          <g id="Group_629" data-name="Group 629" transform="translate(111.421 144.7)">
                            <path id="Path_8782" data-name="Path 8782" d="M308.635,155.33a8.253,8.253,0,0,0-7.215,3.8q-2.6,3.788-2.6,10.461,0,13.852,10.534,13.852a21.344,21.344,0,0,0,6.181-.89,62.169,62.169,0,0,0,6.012-2.14v10.966a33.174,33.174,0,0,1-13.588,2.669q-10.858,0-16.666-6.3t-5.8-18.229a29.048,29.048,0,0,1,2.814-13.107,20.04,20.04,0,0,1,8.081-8.682A24.457,24.457,0,0,1,308.8,144.7a34.133,34.133,0,0,1,14.886,3.391l-3.968,10.221a41.912,41.912,0,0,0-5.315-2.092A18.24,18.24,0,0,0,308.635,155.33Z" transform="translate(-285.5 -144.7)"/>
                            <path id="Path_8783" data-name="Path 8783" d="M501.548,195.526H488.513V175.95H473.435v19.576H460.4V147.5h13.035v17.8h15.079V147.5h13.035Z" transform="translate(-418.338 -146.827)"/>
                            <path id="Path_8784" data-name="Path 8784" d="M660.7,195.526V147.5h13.035v48.026Z" transform="translate(-570.467 -146.827)"/>
                            <path id="Path_8785" data-name="Path 8785" d="M744.1,195.526V147.5h12.987v37.541H775.58v10.485Z" transform="translate(-633.81 -146.827)"/>
                            <path id="Path_8786" data-name="Path 8786" d="M892.9,195.526V147.5h12.987v37.541H924.38v10.485Z" transform="translate(-746.825 -146.827)"/>
                          </g>
                          <g id="Group_630" data-name="Group 630" transform="translate(263.748 184.694)">
                            <path id="Path_8787" data-name="Path 8787" d="M918.9,334.394a.8.8,0,0,1,.216-.6.791.791,0,0,1,.6-.192.8.8,0,0,1,.6.216.878.878,0,0,1,0,1.154.943.943,0,0,1-1.2,0A.71.71,0,0,1,918.9,334.394Z" transform="translate(-918.9 -328.165)"/>
                            <path id="Path_8788" data-name="Path 8788" d="M931.323,312.2a1.418,1.418,0,0,0-1.251.6,2.938,2.938,0,0,0-.457,1.708c0,1.515.577,2.285,1.708,2.285a5.3,5.3,0,0,0,1.732-.361v1.2a4.661,4.661,0,0,1-1.876.361,2.886,2.886,0,0,1-2.285-.89,3.812,3.812,0,0,1-.794-2.6,4.114,4.114,0,0,1,.385-1.852,2.887,2.887,0,0,1,1.106-1.227A3.276,3.276,0,0,1,931.3,311a4.761,4.761,0,0,1,2,.481l-.457,1.178c-.264-.12-.505-.216-.77-.313A1.65,1.65,0,0,0,931.323,312.2Z" transform="translate(-925.887 -311)"/>
                            <path id="Path_8789" data-name="Path 8789" d="M957.993,314.487a3.706,3.706,0,0,1-.842,2.6,3.621,3.621,0,0,1-4.81,0,4.428,4.428,0,0,1,0-5.195,3.658,3.658,0,0,1,4.81.024A3.6,3.6,0,0,1,957.993,314.487Zm-4.978,0a2.79,2.79,0,0,0,.433,1.707,1.52,1.52,0,0,0,1.3.577c1.154,0,1.732-.77,1.732-2.285,0-1.539-.577-2.309-1.707-2.309a1.52,1.52,0,0,0-1.3.577A2.863,2.863,0,0,0,953.015,314.487Z" transform="translate(-943.66 -311)"/>
                            <path id="Path_8790" data-name="Path 8790" d="M985.186,318.206l-1.635-5.339H983.5c.048,1.082.1,1.8.1,2.164v3.174h-1.3V311.4h1.972l1.611,5.195h.024l1.708-5.195h1.972v6.806H988.24v-3.752q0-.289.072-1.587h-.048l-1.756,5.339Z" transform="translate(-967.053 -311.304)"/>
                          </g>
                          <g id="Group_637" data-name="Group 637" transform="translate(56.3 144.7)">
                            <g id="Group_636" data-name="Group 636" transform="translate(0 0)">
                              <g id="Group_631" data-name="Group 631" transform="translate(1.641)">
                                <path id="Path_8791" data-name="Path 8791" d="M63.647,161.414a.53.53,0,0,1-.481-.746l.577-1.347a24.333,24.333,0,0,1,44.611-.024l.553,1.251a.605.605,0,0,1-.529.842H106.5a.6.6,0,0,1-.529-.313l-1.347-2.645a21.372,21.372,0,0,0-37.132.024L66.1,161.126a.539.539,0,0,1-.457.289Z" transform="translate(-63.124 -144.7)"/>
                              </g>
                              <g id="Group_632" data-name="Group 632" transform="translate(1.803 32.611)">
                                <path id="Path_8792" data-name="Path 8792" d="M64.4,280.324l44.443-.024a.717.717,0,0,1,.649,1.01l-.481,1.082a24.333,24.333,0,0,1-44.611.024l-.553-1.227A.614.614,0,0,1,64.4,280.324Zm39.97,2.934-35.16.024a.6.6,0,0,0-.505.938,21.372,21.372,0,0,0,36.074-.144A.514.514,0,0,0,104.369,283.258Z" transform="translate(-63.798 -280.3)"/>
                              </g>
                              <g id="Group_633" data-name="Group 633" transform="translate(0 17.676)">
                                <path id="Path_8793" data-name="Path 8793" d="M56.3,224.958a18.558,18.558,0,0,1,.794-5.772l.192-.529a3.693,3.693,0,0,0,.216-.457h44.275c3.054,0,2.886.216,2.958.529l.168.529a23.208,23.208,0,0,1-.072,11.784l-.12.457a.76.76,0,0,1-.577.529l-.457.072c-5.531.914-18.566.505-22.727-6.4-5.964,8.73-21.74,6.517-22.63,6.421l-.529-.072a.667.667,0,0,1-.577-.505l-.12-.529A23.709,23.709,0,0,1,56.3,224.958Zm3.2-3.2a20.935,20.935,0,0,0,.072,6.95.715.715,0,0,0,.649.6c4.954.361,17.219.746,19.312-7.672l.12-.481H60.22A.727.727,0,0,0,59.5,221.759Zm42.9,0a.7.7,0,0,0-.7-.6H82.249l.12.481c2.02,8.153,15.391,8.032,19.312,7.7a.717.717,0,0,0,.625-.553A20.322,20.322,0,0,0,102.4,221.759Z" transform="translate(-56.3 -218.2)"/>
                              </g>
                              <g id="Group_634" data-name="Group 634" transform="translate(32.659 13.611)">
                                <path id="Path_8794" data-name="Path 8794" d="M192.1,201.993v1.515a.724.724,0,0,0,.721.721h9.042a.707.707,0,0,0,.625-1.034l-.746-1.515a.693.693,0,0,0-.625-.385h-8.273A.682.682,0,0,0,192.1,201.993Z" transform="translate(-192.1 -201.295)"/>
                              </g>
                              <g id="Group_635" data-name="Group 635" transform="translate(6.342 13.756)">
                                <path id="Path_8795" data-name="Path 8795" d="M93.14,202.621v1.515a.724.724,0,0,1-.721.721H83.376a.707.707,0,0,1-.625-1.034l.746-1.515a.716.716,0,0,1,.625-.409h8.273A.715.715,0,0,1,93.14,202.621Z" transform="translate(-82.671 -201.9)"/>
                              </g>
                            </g>
                          </g>
                          <g id="Group_638" data-name="Group 638" transform="translate(100.959 147.249)">
                            <path id="Path_8796" data-name="Path 8796" d="M242,156.983a1.754,1.754,0,0,1,.216-.842,1.731,1.731,0,0,1,.625-.625,1.745,1.745,0,0,1,1.683,0,1.732,1.732,0,0,1,.625.625,1.745,1.745,0,0,1,0,1.683,1.87,1.87,0,0,1-.6.625,1.8,1.8,0,0,1-.866.24,1.57,1.57,0,0,1-.866-.24,1.507,1.507,0,0,1-.6-.625A1.754,1.754,0,0,1,242,156.983Zm.313,0a1.45,1.45,0,0,0,.192.7,1.275,1.275,0,0,0,.505.505,1.361,1.361,0,0,0,.673.192,1.45,1.45,0,0,0,.7-.192,1.276,1.276,0,0,0,.505-.505,1.36,1.36,0,0,0,.192-.673,1.449,1.449,0,0,0-.192-.7,1.275,1.275,0,0,0-.505-.505,1.36,1.36,0,0,0-.673-.192,1.449,1.449,0,0,0-.7.192,1.275,1.275,0,0,0-.505.505A1.293,1.293,0,0,0,242.313,156.983Zm2.068-.409a.513.513,0,0,1-.313.529l.529.89h-.577l-.409-.77h-.1v.77h-.505v-2.044h.6a.856.856,0,0,1,.6.168A.658.658,0,0,1,244.381,156.575Zm-.866.289h.072a.29.29,0,1,0,0-.577h-.072Z" transform="translate(-242 -155.3)"/>
                          </g>
                        </g>
                      </svg>
                    </div>
                    <h1 class="verification_block_header">{{ section.settings.verification_block_header }}</h1>
                    <p class="verification_block_description">{{ section.settings.verification_block_description }}</p>
                    <div class="verification_buttons">
                      <button class="age_verification_yes" id="age_verified" style="background: {{ section.settings.button_color }};">{{ section.settings.button_text }}</button>
                      <a href="https://www.google.com" class="age_verification_no">Leave</a>
                    </div>
                  </div>
                </div>
          </div>
      </div>
    {% endif %} 
  </div>
</div>
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    setTimeout(() => {
      $('#age_verification_preloader_desktop').hide();
      $('#age_verification_preloader_tab').hide();
      $('#age_verification_preloader_mobile').hide();
    }, 500)
  })

  const ageVerifyPopUp = document.getElementsByClassName('age_verification');
  
  (function () {
    let vh = window.innerHeight * 0.01;
    // Then we set the value in the --vh custom property to the root of the document
    document.documentElement.style.setProperty('--vh', `${vh}px`);

    if (document.querySelector('.age_verification')) {
    let ageVerificationModal = document.querySelector('.age_verification')      
    var isModalShown = sessionStorage.getItem('alreadyShown');
    let urlString = window.location.href;
    let isResetPage = urlString.indexOf('/account/reset') > 0 ? true : false ;
    if(isResetPage){
      ageVerificationModal.style.display = 'none'
    }
    else if (!isModalShown) {
      ageVerificationModal.style.display = '';
      document.querySelector('body').classList.add("overflow-hidden")     
    } else {
      ageVerificationModal.style.display = 'none'
    }
    ageVerificationModal.style.height = window.innerHeight
    ageVerificationModal.style.height = 'calc(var(--vh, 1vh) * 100)'
    }
    if (document.querySelector(".age_verification_yes")) {
      document.querySelector(".age_verification_yes").addEventListener('click', () => {
        document.querySelector('.age_verification').style.display = 'none'
        document.querySelector('body').classList.remove("overflow-hidden")
        sessionStorage.setItem('alreadyShown', 'true');
      })
    }
    window.addEventListener('resize', () => {
      // We execute the same script as before
      let vh = window.innerHeight * 0.01;
      document.documentElement.style.setProperty('--vh', `${vh}px`);
    });
  })();
</script>

{% schema %}
{
  "name": "Age verification",
  "class": "age_verification_section",
  "settings": [
      {
        "type": "url",
        "id": "preloader_desktop",
        "label": "Preloader image url for desktop"
      },
      {
        "type": "url",
        "id": "preloader_tablet",
        "label": "Preloader image url for tablet"
      },
      {
        "type": "url",
        "id": "preloader_mobile",
        "label": "Preloader image url for mobile"
      },
      {
          "id": "video",
          "type": "text",
          "label": "Video link",
          "info": "Supports mp4, YouTube and Vimeo. Please read documentation before using. [Read more](https://cleancanvas.co.uk/support/general/background-video)",
          "default": "https:\/\/www.youtube.com\/watch?v=_9VUPq3SxOc"
      },
      {
        "type": "text",
        "id": "verification_block_header",
        "label": "Verification block header"
      },
      {
        "type": "text",
        "id": "verification_block_description",
        "label": "Verification block description"
      },
      {
        "type": "text",
        "id": "button_text",
        "label": "Button text"
      },
      {
        "type": "color",
        "id": "button_color",
        "label": "Button color",
        "default": "#6EC59F"
      }
  ]
}
{% endschema %}
