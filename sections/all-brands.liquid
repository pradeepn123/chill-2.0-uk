{% style %}
    .all_brands_title{
        font-size: {{ section.settings.title_font_size }}px;
    }
    @media (max-width: 768px){
        .all_brands_title{
            font-size: {{ section.settings.title_font_size_mobile }}px;
        }
    }
{% endstyle %}

{% assign alphabet = "#,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z" | split: ',' %}

{% assign brandStartsWith = "" %}
<div class="all_brands_container container">
    <div class="all_brands_title">{{ section.settings.title }}</div>
    <div class="alphabet-index">
        <ul class="alphabet_list">
            {% for letter in alphabet %}
                {% unless letter == '#' %}
                <a href="#letter-{{ letter }}"><li data-letter={{ letter }}>{{ letter }}</li></a>
                {% else %}
                <a href="#letter-hash"><li data-letter={{ letter }}>{{ letter }}</li></a>
                {% endunless %}
            {% endfor %}
        </ul>
    </div>
    
    <div class="brands_wrapper">
        
            {% for letter in alphabet %}
                {% assign brandStartsWith = "" %}
                    <div class="brand_by_alphabet" id="{% unless letter == "#" %}letter-{{ letter }}{% else %}letter-hash{% endunless %}">
                        <ul>
                            {% assign count = 0 %}
                            {% for brand in collections %}
                                    {% if brand.template_suffix == 'new_brands' or brand.template_suffix == 'chill_brand' %}
                                        {% assign firstletter = brand.handle | truncate: 1, '' | upcase %}
                                        {% if letter == firstletter and brand.handle %}
                                            {% if count == 0 %}
                                                <div class="rows">
                                            {% endif %}
                                            {% assign count = count | plus: 1 %}
                                            <li class="brand"><a href="/collections/{{ brand.handle }}">{{ brand.handle }}</a></li>
                                            {% assign brandStartsWith = letter %}
                                            
                                            {% if count == 5 %}
                                                <br>
                                            {% endif %}
                                            {% if count == 5 %}
                                                {% assign count = 0 %}
                                            </div>
                                            {% endif %}
                                        {% endif %}
                                    {% endif %}
                                    
                                {% endfor %}
                            
                        </ul>
                        <h1>{{ brandStartsWith }}</h1>
                    </div>
            {% endfor %}
    </div>
</div>

<script>
    

    document.addEventListener('DOMContentLoaded', () => {

        function removeActiveClassFromIndex(){
            document.querySelectorAll('[data-letter]').forEach(elem => {
                if(elem.parentElement.classList.contains('active')){
                    elem.parentElement.classList.remove('active')
                }
            })
        } 
        function removeActiveClassFromContent(){
            document.querySelectorAll('.brand_by_alphabet').forEach(elem => {
                if(elem.classList.contains('active')){
                    elem.classList.remove('active')
                }
            })
        } 



        document.querySelectorAll(".alphabet_list a").forEach(el => {
            const target = el.getAttribute('href');
            if (!document.querySelector(target + ' h1').innerHTML) {
                el.style.opacity = '.5';
                el.style.cursor = 'default';
            }
            else{
                el.setAttribute('active','active');
                document.querySelector(target).setAttribute('active', 'active')
            }

            el.addEventListener('click', () => {
                removeActiveClassFromContent();
                removeActiveClassFromIndex();
                el.classList.add('active');
                document.querySelector(target).classList.add('active');
            })
        })
        document.querySelectorAll(".alphabet_list a[active]")[0].classList.add('active');
        document.querySelectorAll('.brand_by_alphabet[active]')[0].classList.add('active');
        
        
        
        var brandByAlphabet = document.querySelectorAll('.brand_by_alphabet');
        brandByAlphabet.forEach(brandList => {
            if(brandList.innerText.trim().length == 0){
                brandList.classList.add('inactive')
            }
        })

        var rows = document.querySelectorAll('.rows');
        rows.forEach(row => {
            if(row.innerText.trim().length == 0){
                row.style.display = 'none';
            }
        })
        
    })
</script> 
{% schema %}
{
    "name": "All brands",
    "settings": [
        {
            "type": "richtext",
            "id": "title",
            "label": "Page title",
            "default": "<p>Page title</p>"
        },
        {
            "type": "range",
            "id": "title_font_size",
            "label": "Title font size - Desktop",
            "min": 0,
            "max": 100,
            "step": 2,
            "default": 52
        },
        {
            "type": "range",
            "id": "title_font_size_mobile",
            "label": "Title font size - mobile",
            "min": 0,
            "max": 100,
            "step": 2,
            "default": 28
        }
    ],
    "presets": [
        {
            "name": "All brands"
        }
    ]
}
{% endschema %}